# H5 五子棋重新开发任务规划清单

> 版本：1.0  
> 目标：在 4 个阶段完成重构版 H5 五子棋项目  
> 适用对象：产品经理、项目经理、开发/测试团队

---

## 1. 总览

| 阶段 | 时间估算 | 目标 | 核心交付物 |
|------|-----------|------|-------------|
| 阶段 0 | 1 天 | 环境搭建、文档迁移、项目骨架 | 基础目录结构、工具链、文档集 |
| 阶段 1 | 4 天 | 核心引擎与 PvP 流程 | GameState、RuleEngine、CanvasRenderer（基础版） |
| 阶段 2 | 5 天 | AI 系统与多模式支持 | AIEngine、ModeManager、PvE/EvE 流程 |
| 阶段 3 | 4 天 | 存档回放与 UI 打磨 | SaveLoadService、ReplayService、UI/UX 完整实现 |
| 阶段 4 | 3 天 | 质量保障与发布 | 测试报告、性能基准、发布文档 |

---

## 2. 阶段任务拆解

### 阶段 0：准备（第 1 天）
- [ ] 创建项目目录、初始化 package.json
- [ ] 配置 ESLint + Prettier + EditorConfig
- [ ] 搭建 Vitest/Jest 测试框架（含 Canvas mock）
- [ ] 搭建基础 index.html、CSS、JS 引入顺序
- [ ] 迁移本次生成文档到 `doc_move/`
- [ ] 建立模块导入顺序约定与脚手架脚本

### 阶段 1：核心引擎（第 2-5 天）
- [ ] GameState 实现（落子、悔棋、快照）
- [ ] RuleEngine 实现（胜负、禁手检测）
- [ ] CanvasRenderer 基础渲染（棋盘+棋子）
- [ ] ModeManager 打通 PvP 流程
- [ ] 单元测试：禁手、胜负、状态迁移
- [ ] 基线性能测试：落子/判定耗时

### 阶段 2：AI 与模式控制（第 6-10 天）
- [ ] CandidateGenerator + EvaluationService
- [ ] 四档 AI 策略实现与单元测试
- [ ] ModeManager 扩展 PvE 模式（玩家执黑/白）
- [ ] EvE 自动对战流程 + UI 禁用逻辑
- [ ] AI 思考动画与提示信息
- [ ] 测试页面：AI 模块诊断（可复用旧 `test-module-api.html` 思路）

### 阶段 3：存档回放与 UI 打磨（第 11-14 天）
- [ ] SaveLoadService（本地存储 + JSON 导入导出）
- [ ] ReplayService（播放、暂停、步进、速度调节）
- [ ] HUD、控制按钮、提示信息、禁手高亮、最后落子特效
- [ ] 响应式布局、无障碍支持（键盘导航、ARIA）
- [ ] EvE 模式提示（机机对战文案）
- [ ] Canvas 性能优化（脏区域、离屏绘制）

### 阶段 4：质量保障与发布（第 15-17 天）
- [ ] 单元测试覆盖率 ≥70%
- [ ] 集成测试：完整对局、模式切换、回放
- [ ] 性能基准：AI 响应时间、渲染帧率
- [ ] ModuleDependencyChecker、自定义事件验证
- [ ] 文档更新：需求、架构、规则、UI、CHANGELOG、README
- [ ] 发布 v2.0.0，提供升级指南

---

## 3. 责任分工建议

| 角色 | 职责 |
|------|------|
| 架构师 | 总体架构设计、关键模块接口设计、质量评审 |
| 前端开发 A | GameState、RuleEngine、ModeManager |
| 前端开发 B | CanvasRenderer、HUD、UI/UX |
| AI 工程师 | CandidateGenerator、EvaluationService、AI 策略 |
| 测试工程师 | 测试用例设计、自动化测试、性能测试 |
| 文档工程师 | 需求、架构、规范、用户指南更新 |

---

## 4. 里程碑检查点

| 里程碑 | 验收标准 |
|---------|-----------|
| M1 核心引擎 | 可进行 PvP 对局，禁手正确，UI 显示基本状态 |
| M2 AI 系统 | PvE/EvE 模式稳定，AI 响应时间达标 |
| M3 存档回放 | 棋谱存储加载、回放控制器可用，UI 动效完整 |
| M4 发布准备 | 测试覆盖率达标，性能指标达标，文档更新完成 |

---

## 5. 风险与缓解措施

| 风险 | 影响 | 缓解策略 |
|------|------|-----------|
| AI 搜索性能不足 | EvE 卡顿、用户体验差 | 候选点限制、开局库、降低深度、引入 Web Worker |
| 禁手检测错误 | 规则失真、玩家困惑 | 单元测试覆盖所有棋型、调试工具可视化 |
| 模块耦合复发 | 维护成本高 | 严格遵守架构文档、Code Review 聚焦职责分离 |
| UI 响应式适配差 | 移动端体验差 | 设计阶段提供线框、广泛设备测试 |
| 缺乏测试 | 回归风险高 | 引入 CI，发布前执行完整测试矩阵 |

---

## 6. 检查清单（Stage Gate）

### 开发前
- [ ] 架构与需求文档评审通过
- [ ] 任务拆解确认
- [ ] 工具链与环境搭建完成

### 每日
- [ ] 更新任务进度（看板/表格）
- [ ] 记录风险与阻塞
- [ ] 整理核心结论或技术要点

### 阶段结束
- [ ] Demo 演示（关键功能）
- [ ] 测试报告（通过率、问题列表）
- [ ] 文档同步更新

### 项目收尾
- [ ] CHANGELOG、README 更新
- [ ] 生成发布说明与升级指南
- [ ] 回顾会议（总结经验/改进点）

---

## 7. 参考资料
- 《01_项目需求规格说明书.md》
- 《02_技术架构设计文档.md》
- 《03_游戏规则与AI算法要点.md》
- 《04_UI设计与交互规范.md》
- 旧项目文档：`docs/` 目录（保留历史参考）

---

> 本清单为团队提供明确的时间表、任务划分与风险控制点，可结合看板/甘特图进一步细化执行。