# H5 五子棋重构项目快速开始指南

> 5 分钟快速了解本项目，10 分钟开始编码

---

## 🚀 三句话了解项目

1. **这是什么**：一个基于 Canvas 的纯前端五子棋游戏，支持 PvP/PvE/EvE 三种模式，完整禁手规则，四级 AI 难度
2. **为什么重构**：旧项目代码耦合、缺乏测试、维护困难，需要清晰架构支持未来扩展
3. **如何重构**：按照本文档集的规范，分 4 阶段 17 天完成核心引擎、AI 系统、UI 打磨、质量保障

---

## 📖 文档阅读顺序

### 新手必读（30 分钟）
1. 本文档（快速开始指南）← 你在这里
2. [README.md](./README.md) - 文档导航
3. [01_项目需求规格说明书.md](./01_项目需求规格说明书.md) 前 3 章 - 了解项目目标

### 开发前必读（2 小时）
4. [02_技术架构设计文档.md](./02_技术架构设计文档.md) §1-§4 - 核心架构
5. [05_重新开发任务规划清单.md](./05_重新开发任务规划清单.md) - 任务拆解
6. [06_开发建议与最佳实践.md](./06_开发建议与最佳实践.md) §1-§3 - 代码规范

### 实现时参考（按需查阅）
7. [03_游戏规则与AI算法要点.md](./03_游戏规则与AI算法要点.md) - 规则与算法
8. [04_UI设计与交互规范.md](./04_UI设计与交互规范.md) - UI 设计

---

## 🎯 核心概念速查

### 游戏模式
- **PvP**：双人本地对战，支持悔棋
- **PvE**：玩家 vs AI，可选 4 种难度（新手/正常/困难/地狱）
- **EvE**：双 AI 自动对战，黑白 AI 难度独立配置，玩家观战

### 禁手规则（黑棋限定）
- **三三**：一步形成 ≥2 个活三
- **四四**：一步形成 ≥2 个活四/冲四
- **长连**：一步形成 ≥6 连

### AI 难度对比
| 难度 | 算法 | 响应时间 | 目标体验 |
|------|------|----------|----------|
| 新手 | 随机+简单防守 | <600ms | 玩家轻松获胜 |
| 正常 | Minimax + Alpha-Beta | <1000ms | 旗鼓相当 |
| 困难 | 深度搜索+威胁序列 | <2000ms | 有挑战性 |
| 地狱 | 威胁空间搜索 | <2400ms | 接近专家级 |

### 核心模块
- **GameState**：棋盘数据、历史记录
- **RuleEngine**：禁手检测、胜负判定
- **AIEngine**：策略调度、落子计算
- **CanvasRenderer**：Canvas 渲染
- **ModeManager**：模式切换、流程控制

---

## 💻 10 分钟启动开发

### 1. 环境准备（2 分钟）
```bash
# 克隆项目（假设）
git clone <repo-url>
cd h5-gomoku-v2

# 安装依赖（如果使用构建工具）
npm install

# 启动开发服务器
npx http-server -p 8080
# 或
python3 -m http.server 8080
```

### 2. 目录结构（1 分钟）
```
h5-gomoku-v2/
├── index.html           # 主页面
├── css/
│   ├── style.css       # 主样式
│   └── animations.css  # 动画
├── js/
│   ├── core/           # 核心模块：GameState, RuleEngine, AIEngine
│   ├── ui/             # UI 模块：CanvasRenderer, HudPanel
│   ├── services/       # 服务：SaveLoad, Replay
│   ├── utils/          # 工具：EventBus, Logger
│   └── main.js         # 入口文件
├── doc_move/           # 本文档集
└── test/               # 测试文件
```

### 3. 第一个模块（5 分钟）
创建 `js/core/GameState.js`：
```javascript
/**
 * 游戏状态管理
 */
class GameState {
  constructor() {
    this.boardSize = 15;
    this.board = Array(15).fill().map(() => Array(15).fill(0));
    this.currentPlayer = 1;
    this.moveHistory = [];
    this.gameStatus = 'ready';
  }

  reset() {
    this.board = Array(15).fill().map(() => Array(15).fill(0));
    this.currentPlayer = 1;
    this.moveHistory = [];
    this.gameStatus = 'ready';
  }

  applyMove(x, y) {
    if (!this.isValidPosition(x, y)) {
      throw new Error(`Invalid position: (${x}, ${y})`);
    }
    if (this.board[y][x] !== 0) {
      throw new Error('Position occupied');
    }

    this.board[y][x] = this.currentPlayer;
    this.moveHistory.push({ x, y, player: this.currentPlayer, timestamp: Date.now() });
    this.gameStatus = 'playing';
  }

  switchPlayer() {
    this.currentPlayer = this.currentPlayer === 1 ? 2 : 1;
  }

  isValidPosition(x, y) {
    return x >= 0 && x < this.boardSize && y >= 0 && y < this.boardSize;
  }

  getSnapshot() {
    return JSON.parse(JSON.stringify({
      board: this.board,
      currentPlayer: this.currentPlayer,
      moveHistory: this.moveHistory,
      gameStatus: this.gameStatus
    }));
  }
}

// 模块导出
GameState.__moduleInfo = {
  name: 'GameState',
  version: '2.0.0',
  dependencies: []
};

if (typeof window !== 'undefined') {
  window.GameState = GameState;
}
```

### 4. 验证模块（2 分钟）
在浏览器控制台：
```javascript
const state = new GameState();
state.applyMove(7, 7);
state.switchPlayer();
state.applyMove(7, 8);
console.log(state.getSnapshot());
```

---

## ✅ 开发检查清单

### 开始编码前
- [ ] 阅读完需求规格书和架构文档
- [ ] 理解模块职责划分
- [ ] 配置好 ESLint 和 Prettier
- [ ] 搭建好测试框架

### 每个模块完成后
- [ ] JSDoc 注释完整
- [ ] 输入验证与错误处理
- [ ] 单元测试覆盖核心逻辑
- [ ] 日志输出规范（带模块前缀）
- [ ] 模块元信息正确导出

### Code Review 时
- [ ] 对照最佳实践检查
- [ ] 职责单一，无全局变量污染
- [ ] 使用事件总线而非直接跨层调用
- [ ] 性能敏感代码有优化

---

## 🔧 常用命令

```bash
# 启动开发服务器
npm run dev
# 或
npx http-server -p 8080

# 运行测试
npm test

# 代码检查
npm run lint

# 格式化代码
npm run format

# 构建（如果有）
npm run build
```

---

## 🐛 遇到问题？

### 常见问题
1. **模块加载顺序错误**
   - 解决：检查 HTML 中 script 标签顺序，依赖模块先加载

2. **禁手检测不准确**
   - 解决：参考 `03_游戏规则与AI算法要点.md` §2，使用线性签名方法

3. **AI 计算太慢**
   - 解决：限制候选点、增加剪枝，参考 `06_开发建议与最佳实践.md` §6.2

4. **Canvas 渲染卡顿**
   - 解决：分层渲染、脏区域标记，参考架构文档 §11

### 调试技巧
```javascript
// 启用调试模式
window.GomokuDebug.init(app);
window.GomokuDebug.logBoard();
window.GomokuDebug.testForbidden(7, 7);
```

---

## 📞 获取帮助

- **文档问题**：先查阅 README.md 的文档导航
- **技术问题**：参考对应主题的详细文档
- **规范疑问**：查看开发建议与最佳实践文档
- **任务规划**：查看重新开发任务规划清单

---

## 🎉 下一步

1. **团队评审**：组织团队共同评审所有文档，确认需求与架构
2. **环境搭建**：按阶段 0 任务搭建开发环境
3. **开始编码**：从 GameState 开始，逐步完成核心模块
4. **持续集成**：建立测试、Code Review 流程

---

> **提示**：本文档为快速入门，详细规范请参阅对应主题文档。祝开发顺利！🚀
